<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consulta de Paciente</title>
  <link rel="icon" href="../img/icono_nutricionista.png">
  <link rel="stylesheet" href="../css/tablaConsulta.css"> 
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  
</head>
<body>
  <div class="container">
    <h2 id="title-consult">Nueva consulta</h2>
    <p>Ingrese datos del paciente</p>
    
    <!-- Formulario inicia aquí -->
    <form id="consultaForm">
    
      <div class="form-group">
        <label for="date" class="requerido">Fecha</label>
        <input type="date" id="date" name="date">
      </div>

      <div class="form-group">
        <label for="weight">Peso</label>
        <input type="number" id="weight" name="weight">
      </div>

      <div class="form-group">
        <label for="height">Altura</label>
        <input type="number" id="height" name="height">
      </div>

      <div class="form-group">
        <label for="presion">P.A (Presión Arterial)</label>
        <input type="number" id="presion" name="presion">
      </div>

      <div class="form-group">
        <label for="motivo">Motivo de la Visita</label>
        <textarea id="motivo" name="motivo" rows="4"></textarea>
      </div>

      <div class="form-group">
        <label for="diagnosis" class="requerido">Diagnóstico</label>
        <textarea id="diagnosis" name="diagnosis" rows="4"></textarea>
      </div>

      <div class="form-group">
        <label for="treatment" class="requerido">Tratamiento</label>
        <textarea id="treatment" name="treatment" rows="4"></textarea>
      </div>

      <div class="form-group">
        <label for="studies">Estudios a realizar</label>
        <textarea id="studies" name="studies" rows="4"></textarea>
      </div>

      <!-- Agregamos de manera temporal un campo para mostrar el id del paciente que quiere hacer la consulta -->
      <div class="form-group idPatient">
        <label for="idPatient">ID Paciente</label>
        <input type="text" id="idPatient" name="idPatient" disabled>
      </div>

      <div class="btn-container">
        <div class="dropdown">
          <button type="button" class="btn" onclick="toggleDropdown('consultaDropdown')">Guardar</button>
          <div id="consultaDropdown" class="dropdown-content">
            <!-- <a href="#" id="saveAndContinue" onclick="showModal('consulta', './tablaConsulta.html')">Guardar y Continuar</a> -->
            <!-- <a href="#" id="saveAndExit" onclick="showModal('consulta', './proyecGeneral.html')">Guardar y Salir</a> -->
            <a href="#" id="saveAndContinue">Guardar y Continuar</a>
            <a href="#" id="saveAndExit">Guardar y Salir</a>
            <a href="/paciente/lista" class="dropdown-item">Salir</a>
          </div>
        </div>

        <div class="dropdown">
          <button type="button" class="btn" onclick="toggleDropdown('enviarDropdown')">Enviar</button>
          <div id="enviarDropdown" class="dropdown-content">
             <!--<a href="#" onclick="handleSendOption('whatsapp')">WhatsApp</a>-->
            <a href="#" onclick="handleSendOption('correo')">Correo electronico</a>
          </div>
        </div>
      </div>

    </form> <!-- Formulario termina aquí -->
  
  </div>

  <!-- Ventana emergente -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <p id="modalMessage"></p>
      <button id="btnClose" onclick="closeModal()">Aceptar</button>
    </div>
  </div>

  <!-- Ventana emergente para mostrar el PDF -->
  <div id="pdfModal" class="modal">
    <div class="modal-content">
      <h3 style="font-weight: bold; text-transform: uppercase;">CMU DOCTORA URIARTES</h3>
      <iframe id="pdfFrame" style="width: 100%; height: 400px;"></iframe>
      <button onclick="sendPDF()">Enviar</button>
      <button onclick="closePdfModal()">Cerrar</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="../js/tablaConsulta.js"></script>
</body>
</html>
